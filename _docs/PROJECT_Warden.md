# Дизайн-документ проекта: "Warden" v1.0
**Дата: 23.08.2025**

## ГЛАВА 1: КОНЦЕПЦИЯ И НАЗНАЧЕНИЕ

**"Warden"** (Страж) — это кастомный Discord-бот, разработанный для сервера "Тихе місце". Его основная задача — автоматизация рутинных задач модерации и предоставление аналитической информации об активности участников, подаваемой в креативной и мотивирующей форме.

**Принцип ведения проекта:** Любое изменение или добавление функционала должно быть сначала зафиксировано в этом документе через процедуру планирования, прежде чем переходить к реализации.

---

## ГЛАВА 2: ФУНКЦИОНАЛ (v1.0)

### 2.1. Очистка Канала

*   **Назначение:** Полная очистка текстового канала от сообщений.
*   **Команда:** `очистить чат` (регистронезависимо).
*   **Исполнитель:** Только участники с правом "Администратор".
*   **Логика:** Бот удаляет все сообщения в том канале, где была вызвана команда, за исключением закрепленных. Учитывается ограничение Discord API на удаление сообщений старше 14 дней.
*   **Обратная связь:** Бот информирует о начале и завершении очистки, указывая количество удаленных сообщений.

### 2.2. Ежедневный Отчет об Активности

*   **Назначение:** Автоматическая публикация сводки об активности участников за последние 24 часа.
*   **Время срабатывания:** Ежедневно в **22:00** по Киевскому времени (Europe/Kiev).
*   **Целевой канал:** Канал, указанный в `config.json` (текущее значение: `#лялякаємо`, ID: `957894884835069952`).
*   **Содержимое:** Отчет в формате `Embed` с креативными "номинациями" и заглушками для неактивных категорий.
*   **Анализируемые метрики:**
    1.  Общее количество сообщений (победитель - "Главный Болтун").
    2.  Количество ссылок на YouTube ("Проводник в мир YouTube").
    3.  Количество изображений ("Пикчер-Бог").
    4.  Количество других ссылок ("Магистр Ссылок").
    5.  Количество поставленных реакций ("Король Реакций").
    6.  Количество прикрепленных файлов ("Офис-менеджер").

---

## ГЛАВА 3: ТЕХНИЧЕСКИЕ НАСТРОЙКИ (v1.0)

### 3.1. Настройки на Портале Разработчиков Discord

*   **Имя Приложения:** Шпион
*   **Имя Бота:** Железный Гарри#1373
*   **Privileged Gateway Intents:**
    *   `PRESENCE INTENT`: **Включено**
    *   `SERVER MEMBERS INTENT`: **Включено**
    *   `MESSAGE CONTENT INTENT`: **Включено**

### 3.2. Настройки Роли на Сервере ("Шпион")

*   **Ключевые включенные права (согласно анализу от 23.08):**
    *   `Дивитися канали` (View Channels)
    *   `Читати історію повідомлень` (Read Message History)
    *   `Надсилання повідомлень та створення публікацій` (Send Messages)
    *   `Вставляти посилання` (Embed Links)
    *   `Використовувати команди застосунку` (Use Slash Commands)
*   **Ключевые ВЫКЛЮЧЕННЫЕ права (требуется исправить):**
    *   **`Керувати повідомленнями` (Manage Messages): ДОЛЖНО БЫТЬ ВКЛЮЧЕНО.**

### 3.3. Локальная конфигурация (`config.json`)

*   `DISCORD_BOT_TOKEN`: Секретный токен бота.
*   `REPORT_CHANNEL_ID`: ID канала для публикации отчетов.

---

## ГЛАВА 4: ПЛАН РАЗВИТИЯ

*   **v1.1 (в планах):** Перевод бота на 24/7 хостинг (Replit).
*   **v1.2 (в планах):** Расширение статистики (например, активность в голосовых каналах).